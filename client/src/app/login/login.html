<div class="login-container">
    <!-- Interactive Liquid Gradient Background -->
    <div id="liquid-gradient-container"></div>
    
    <mat-card class="example-card" appearance="outlined">
        <mat-card-header>
            <mat-card-title>
                <h3>{{mode.toLocaleUpperCase()}}</h3>
            </mat-card-title>
        </mat-card-header>
        <mat-card-content>
            <form (ngSubmit)="onSubmit()" [formGroup]="form" autocomplete="off">
                <!-- Error from Server -->
                @if (errorFromServer() !== '') {
                <div class="error-container">
                    <span class="error">{{errorFromServer()}}</span>
                </div>
                }
                <!-- Email -->
                <mat-form-field appearance="outline">
                    <mat-label>Email</mat-label>
                    <input matInput type="text" (input)="updateErrorMsg('username')" formControlName="username"
                        placeholder="type your email here">
                    @if (form.controls['username'].invalid) {
                    <mat-error>{{errorMsg.username()}}</mat-error>
                    }
                </mat-form-field>

                <!-- Password -->
                <mat-form-field appearance="outline">
                    <mat-label>Password</mat-label>
                    <input matInput type="password" (input)="updateErrorMsg('password')" formControlName="password"
                        placeholder="type your password here">
                    @if (form.controls['password'].invalid) {
                    <mat-error>{{errorMsg.password()}}</mat-error>
                    }
                </mat-form-field>

                @if (mode !== 'login') {
                <!-- Confirm Password -->
                <mat-form-field appearance="outline">
                    <mat-label>Confirm Password</mat-label>
                    <input matInput type="password" (input)="updateErrorMsg('cf_password')"
                        formControlName="cf_password" placeholder="type your password here">
                    @if (form.controls['cf_password'].invalid) {
                    <mat-error>{{errorMsg.cf_password()}}</mat-error>
                    }
                </mat-form-field>

                <!-- Display name -->
                <mat-form-field appearance="outline">
                    <mat-label>Aka</mat-label>
                    <input matInput type="text" (input)="updateErrorMsg('displayname')" formControlName="display_name"
                        placeholder="type your aka here">
                    @if (form.controls['display_name'].invalid) {
                    <mat-error>{{errorMsg.displayname()}}</mat-error>
                    }
                </mat-form-field>
                }

                <div class="form-actions" style="display: flex; justify-content: center; margin-top: 1rem;">
                    <div class='wrapper' (click)="form.valid && onSubmit()">
                        <div role='button' [class]="'retro-btn ' + (form.valid ? 'primary' : 'secondary')" [style.cursor]="form.valid ? 'pointer' : 'not-allowed'">
                            <a class='btn'>
                                <span class='btn-inner'>
                                    <span class='content-wrapper'>
                                        <span class='btn-content'>
                                            <span class='btn-content-inner'>{{ mode === 'login' ? 'Login' : 'Get Started' }}</span>
                                        </span>
                                    </span>
                                </span>
                            </a>
                        </div>
                    </div>
                </div>
                <!-- 
                //TODO:: Slide 1.Angular P.45
                -->
            </form>
            <div class="login-spacer">or</div>
            @if (mode === 'login') {
            <div class="toggle">New to Brawler? <span (click)="toggleMode()">Sign Up</span></div>
            }
            @if (mode !== 'login') {
            <div class="toggle">Already have an account? <span (click)="toggleMode()">Sign In</span></div>
            }
        </mat-card-content>

    </mat-card>
</div>

